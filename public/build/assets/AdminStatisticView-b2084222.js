import{f as y,g as k,o as v,a as n,b as d,d as e,F as g,r as h,e as w,k as r,n as c,w as u,v as p,t as V}from"./app-7ddd2cfa.js";const S={class:"p-8"},U={class:"mt-8 rounded-2xl border border-slate-200 bg-white p-6 shadow-sm"},N={key:0,class:"grid place-items-center py-16"},$={key:1,class:"space-y-4"},C={class:"grid gap-4 md:grid-cols-4"},j={class:"text-xs font-semibold text-slate-500 space-y-1 md:col-span-2"},B=["onUpdate:modelValue"],I={class:"text-xs font-semibold text-slate-500 space-y-1"},D=["onUpdate:modelValue"],M={class:"text-xs font-semibold text-slate-500 space-y-1"},T=["onUpdate:modelValue"],F={class:"text-xs font-semibold text-slate-500 space-y-1"},H=["onUpdate:modelValue"],L={class:"mt-4 flex justify-between text-xs font-semibold"},O={class:"text-slate-400"},A={class:"space-x-3"},E=["onClick"],K=["onClick"],R={key:0,class:"text-center text-xs text-slate-400"},G={__name:"AdminStatisticView",setup(q){const b=y(!1),o=k([]);function i(t={}){return{_key:`${t.id??"new"}-${Math.random().toString(36).slice(2,9)}`,id:t.id??null,label:t.label??"",value:Number(t.value??0),icon:t.icon??"",order:Number(t.order??0)}}async function x(){b.value=!0;try{const{data:t}=await r.get("/statistics");o.splice(0,o.length,...t.map(i))}finally{b.value=!1}}function f(){o.unshift(i())}async function _(t){const s={label:t.label,value:Number(t.value)||0,icon:t.icon||null,order:Number(t.order)||0};if(t.id){const{data:a}=await r.put(`/statistics/${t.id}`,s);Object.assign(t,i(a))}else{const{data:a}=await r.post("/statistics",s);Object.assign(t,i(a))}}async function m(t){if(t.id){if(!confirm(`Hapus statistik "${t.label||"statistik"}"?`))return;await r.delete(`/statistics/${t.id}`)}const s=o.findIndex(a=>a._key===t._key);s!==-1&&o.splice(s,1)}return v(x),(t,s)=>(n(),d("div",S,[e("header",{class:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between"},[s[0]||(s[0]=e("div",null,[e("h1",{class:"text-2xl font-semibold text-slate-900"},"Statistik Desa"),e("p",{class:"text-sm text-slate-500"},"Kelola indikator statistik yang ditampilkan di beranda.")],-1)),e("button",{class:"inline-flex items-center gap-2 rounded-full bg-primary px-4 py-2 text-sm font-semibold text-white",onClick:f}," Tambah Statistik ")]),e("section",U,[b.value?(n(),d("div",N,[...s[1]||(s[1]=[e("div",{class:"h-10 w-10 animate-spin rounded-full border-4 border-primary/30 border-t-primary"},null,-1)])])):(n(),d("div",$,[(n(!0),d(g,null,h(o,a=>(n(),d("article",{key:a._key,class:"rounded-xl border border-slate-100 bg-slate-50 p-4"},[e("div",C,[e("label",j,[s[2]||(s[2]=c(" Label ",-1)),u(e("input",{"onUpdate:modelValue":l=>a.label=l,type:"text",class:"w-full rounded-lg border border-slate-200 px-3 py-2"},null,8,B),[[p,a.label]])]),e("label",I,[s[3]||(s[3]=c(" Nilai ",-1)),u(e("input",{"onUpdate:modelValue":l=>a.value=l,type:"number",min:"0",class:"w-full rounded-lg border border-slate-200 px-3 py-2"},null,8,D),[[p,a.value,void 0,{number:!0}]])]),e("label",M,[s[4]||(s[4]=c(" Ikon ",-1)),u(e("input",{"onUpdate:modelValue":l=>a.icon=l,type:"text",class:"w-full rounded-lg border border-slate-200 px-3 py-2"},null,8,T),[[p,a.icon]])]),e("label",F,[s[5]||(s[5]=c(" Urutan ",-1)),u(e("input",{"onUpdate:modelValue":l=>a.order=l,type:"number",min:"0",class:"w-full rounded-lg border border-slate-200 px-3 py-2"},null,8,H),[[p,a.order,void 0,{number:!0}]])])]),e("div",L,[e("span",O,V(a.id?"Statistik tersimpan":"Statistik baru"),1),e("div",A,[e("button",{class:"text-primary",onClick:l=>_(a)},"Simpan",8,E),e("button",{class:"text-rose-500",onClick:l=>m(a)},"Hapus",8,K)])])]))),128)),o.length?w("",!0):(n(),d("p",R,"Belum ada data statistik."))]))])]))}};export{G as default};
