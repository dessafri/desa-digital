import{f as g,g as h,c as S,o as j,h as M,a as r,b as o,d as a,w as x,v as $,i as L,j as b,F as f,r as v,e as U,k as w,t as d,l as _,m as k,n as C,p as F}from"./app-7ddd2cfa.js";const I={class:"bg-slate-50 min-h-screen"},K={class:"bg-white shadow-sm"},T={class:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-12"},P={class:"mt-8 grid gap-4 sm:grid-cols-[1fr_auto_auto]"},R={class:"relative"},z=["value"],A={class:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-12"},E={key:0,class:"grid place-items-center py-20"},q={key:1},G={key:0,class:"grid gap-6 md:grid-cols-2 lg:grid-cols-3"},H={class:"relative h-48 overflow-hidden"},J=["src","alt"],O={class:"absolute left-4 top-4 inline-flex items-center rounded-full bg-white/90 px-3 py-1 text-xs font-semibold text-primary"},Q={class:"p-6 space-y-3"},W={class:"text-xs uppercase tracking-wide text-slate-400"},X={class:"text-sm text-slate-600 line-clamp-3"},Y={key:1,class:"rounded-3xl border border-slate-100 bg-white p-10 text-center text-sm text-slate-500"},Z={key:2,class:"mt-10 flex flex-wrap items-center justify-center gap-2"},ee=["onClick"],se={__name:"NewsListView",setup(te){const u=g([]),y=g([]),c=g(!1),n=h({total:0,current_page:1,per_page:6}),l=h({search:"",category:"",per_page:6}),D=S(()=>{const s=Math.ceil((n.total||0)/n.per_page)||1;return Array.from({length:s},(e,p)=>p+1)});async function V(){const{data:s}=await w.get("/news-categories");y.value=s}async function i(s=1){c.value=!0;try{const{data:e}=await w.get("/news",{params:{page:s,search:l.search||void 0,category:l.category||void 0,per_page:l.per_page}});u.value=e.data??[],n.total=e.total??0,n.current_page=e.current_page??1,n.per_page=e.per_page??l.per_page}finally{c.value=!1}}function B(s){s!==n.current_page&&i(s)}function N(s){return s?new Intl.DateTimeFormat("id-ID",{day:"numeric",month:"long",year:"numeric"}).format(new Date(s)):""}return j(async()=>{await V(),await i()}),(s,e)=>{const p=M("RouterLink");return r(),o("div",I,[a("section",K,[a("div",T,[e[9]||(e[9]=a("h1",{class:"text-3xl font-bold text-slate-900"},"Berita Desa Sugihwaras",-1)),e[10]||(e[10]=a("p",{class:"mt-3 text-sm text-slate-600"}," Update kegiatan, program, dan informasi penting yang berlangsung di Desa Sugihwaras. ",-1)),a("div",P,[a("div",R,[x(a("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>l.search=t),type:"text",placeholder:"Cari berita...",class:"w-full rounded-full border border-slate-200 bg-white px-5 py-3 text-sm shadow-sm focus:border-primary focus:outline-none",onKeyup:e[1]||(e[1]=L(t=>i(),["enter"]))},null,544),[[$,l.search]]),a("button",{class:"absolute right-2 top-1/2 -translate-y-1/2 rounded-full bg-primary px-4 py-2 text-sm font-semibold text-white",onClick:e[2]||(e[2]=t=>i())}," Cari ")]),x(a("select",{"onUpdate:modelValue":e[3]||(e[3]=t=>l.category=t),class:"rounded-full border border-slate-200 bg-white px-4 py-3 text-sm text-slate-600",onChange:e[4]||(e[4]=t=>i())},[e[7]||(e[7]=a("option",{value:""},"Semua Kategori",-1)),(r(!0),o(f,null,v(y.value,t=>(r(),o("option",{key:t.id,value:t.slug},d(t.name),9,z))),128))],544),[[b,l.category]]),x(a("select",{"onUpdate:modelValue":e[5]||(e[5]=t=>l.per_page=t),class:"rounded-full border border-slate-200 bg-white px-4 py-3 text-sm text-slate-600",onChange:e[6]||(e[6]=t=>i())},[...e[8]||(e[8]=[a("option",{value:6},"6 / halaman",-1),a("option",{value:9},"9 / halaman",-1),a("option",{value:12},"12 / halaman",-1)])],544),[[b,l.per_page]])])])]),a("section",A,[c.value?(r(),o("div",E,[...e[11]||(e[11]=[a("div",{class:"h-12 w-12 animate-spin rounded-full border-4 border-primary/30 border-t-primary"},null,-1)])])):(r(),o("div",q,[u.value.length?(r(),o("div",G,[(r(!0),o(f,null,v(u.value,t=>{var m;return r(),o("article",{key:t.id,class:"group overflow-hidden rounded-3xl bg-white shadow-lg border border-slate-100 transition hover:-translate-y-2"},[a("div",H,[a("img",{src:t.cover_image,alt:t.title,class:"h-full w-full object-cover transition duration-500 group-hover:scale-110"},null,8,J),a("span",O,d(((m=t.category)==null?void 0:m.name)??"Informasi Desa"),1)]),a("div",Q,[a("p",W,d(N(t.published_at)),1),_(p,{to:/berita/,class:"block text-lg font-semibold text-slate-900 hover:text-primary line-clamp-2"},{default:k(()=>[C(d(t.title),1)]),_:2},1024),a("p",X,d(t.excerpt),1),_(p,{to:/berita/,class:"inline-flex items-center gap-2 text-sm font-semibold text-primary"},{default:k(()=>[...e[12]||(e[12]=[C(" Baca Selengkapnya ",-1),a("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M9 5l7 7-7 7"})],-1)])]),_:1})])])}),128))])):(r(),o("div",Y," Belum ada berita yang dapat ditampilkan. ")),n.total>n.per_page?(r(),o("div",Z,[(r(!0),o(f,null,v(D.value,t=>(r(),o("button",{key:t,class:F(["inline-flex h-9 w-9 items-center justify-center rounded-full border text-sm",t===n.current_page?"border-primary bg-primary text-white":"border-slate-200 bg-white text-slate-600 hover:border-primary hover:text-primary"]),onClick:m=>B(t)},d(t),11,ee))),128))])):U("",!0)]))])])}}};export{se as default};
