import{g as A,f as y,c as $,o as L,h as W,a as v,b as w,d as t,n as r,w as d,v as u,l as g,A as i,e as z,F as R,r as q,k as h,y as k}from"./app-0010789c.js";import{n as U}from"./notify-9318a045.js";import{c as j,J as Q,a as X}from"./jodit-11da9fd9.js";const Y={class:"p-8"},Z={class:"mt-8 grid gap-6 lg:grid-cols-2"},ee={class:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm space-y-4"},te={class:"grid gap-4 text-sm"},se={class:"text-xs font-semibold text-slate-500 space-y-1"},oe={class:"text-xs font-semibold text-slate-500 space-y-1"},le={class:"text-xs font-semibold text-slate-500 space-y-1"},ae={class:"text-xs font-semibold text-slate-500 space-y-1"},re={class:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm space-y-4"},ne={class:"grid gap-4 text-sm"},ie={class:"text-xs font-semibold text-slate-500 space-y-1"},de={class:"text-xs font-semibold text-slate-500 space-y-1"},ue={class:"grid gap-4 md:grid-cols-2"},pe={class:"text-xs font-semibold text-slate-500 space-y-1"},me={class:"text-xs font-semibold text-slate-500 space-y-1"},ce={class:"text-xs font-semibold text-slate-500 space-y-1"},be={class:"text-xs font-semibold text-slate-500 space-y-1"},xe={class:"grid gap-2 text-xs font-semibold text-slate-500"},fe={class:"flex items-center gap-3"},ge={class:"h-16 w-16 overflow-hidden rounded-full border bg-slate-100"},ye=["src"],ve={class:"cursor-pointer rounded-lg border border-slate-200 px-3 py-2 text-xs font-semibold text-slate-600 hover:border-primary/40 hover:text-primary"},we={class:"mt-4 border-t pt-4"},he={class:"mt-3 flex flex-wrap gap-3"},Ue=["onDragstart","onDragenter","onDrop"],Ve=["src"],De=["onClick"],ke={class:"grid h-24 w-40 cursor-pointer place-items-center rounded-lg border-2 border-dashed border-slate-300 text-xs text-slate-500 hover:border-primary/60 hover:text-primary"},je={class:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm space-y-4"},Se={class:"grid gap-4 text-sm"},Ce={class:"text-xs font-semibold text-slate-500 space-y-1"},_e={class:"text-xs font-semibold text-slate-500 space-y-1"},Te={class:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm space-y-4"},Ae={class:"grid gap-4 text-sm"},He={class:"text-xs font-semibold text-slate-500 space-y-1"},Ee={class:"text-xs font-semibold text-slate-500 space-y-1"},Je={class:"text-xs font-semibold text-slate-500 space-y-1"},Ie={class:"text-xs font-semibold text-slate-500 space-y-1"},Ne={class:"text-xs font-semibold text-slate-500 space-y-1"},Ke={__name:"AdminSettingView",setup(Fe){const b=Q,x=X,S=j({minHeight:180}),C=j({minHeight:240}),H=j({minHeight:220}),V=["site.name","site.tagline","site.primary_color","site.secondary_color","hero.title","hero.subtitle","hero.cta_text","hero.cta_link","hero.images","welcome.message","welcome.author","welcome.photo","vision.body","mission.items","contact.address","contact.email","contact.phone","social.facebook","social.instagram"],o=A(Object.fromEntries(V.map(a=>[a,""]))),_=A({}),m=y(""),p=y([]),c=y(null),D=y(null);function E(a){return a?String(a).replace(/<\s*br\s*\/?\s*>/gi,`
`).replace(/<\s*\/p\s*>/gi,`
`).replace(/<\s*li\s*>/gi,"").replace(/<\s*\/li\s*>/gi,`
`).replace(/<\s*\/div\s*>/gi,`
`).replace(/<\s*\/h[1-6]\s*>/gi,`
`).replace(/<[^>]*>/g,"").split(`
`).map(s=>s.trim()).filter(Boolean):[]}const J=$(()=>E(m.value));async function T(){var e;const{data:a}=await h.get("/settings",{params:{keys:V.join(",")}});a.forEach(l=>{if(_[l.key]=l,l.type==="json"){const s=I(l.value);Array.isArray(s)&&l.key==="mission.items"&&(m.value=s.join(`
`)),Array.isArray(s)&&l.key==="hero.images"&&(p.value=s)}else o[l.key]=l.value??""}),m.value||(m.value=(((e=_["mission.items"])==null?void 0:e.value)??"").split(`
`).filter(Boolean).join(`
`)),o["site.primary_color"]||(o["site.primary_color"]="#0EA5E9"),o["site.secondary_color"]||(o["site.secondary_color"]="#10B981")}function I(a){try{return JSON.parse(a)}catch{return a}}async function N(){try{const a=new Set(["mission.items","hero.images"]),e=V.map(l=>{const s=a.has(l);let n=o[l];return l==="mission.items"&&(n=J.value),l==="hero.images"&&(n=p.value),h.post("/settings",{key:l,value:n,type:s?"json":"text"})});await Promise.all(e),await T(),U.success("Pengaturan tersimpan")}catch(a){console.error(a),U.error("Gagal menyimpan pengaturan")}}async function F(a){const e=Array.from(a.target.files||[]);if(e.length)try{const l=new FormData;e.forEach(f=>l.append("files[]",f));const{data:s}=await h.post("/settings/upload-hero",l,{headers:{"Content-Type":"multipart/form-data"}}),n=Array.isArray(s)?s:[];p.value.push(...n),U.success("Gambar ditambahkan")}catch(l){console.error(l),U.error("Upload gambar gagal")}finally{a.target.value=""}}function P(a){p.value.splice(a,1)}function B(a){c.value=a}function M(a){c.value!==null&&(D.value=a)}function K(a){if(c.value===null)return;const e=c.value,l=a;if(e!==l){const[s]=p.value.splice(e,1);p.value.splice(l,0,s)}c.value=null,D.value=null}function O(){c.value=null,D.value=null}L(T);async function G(a){var l;const e=(l=a.target.files)==null?void 0:l[0];if(e)try{const s=new FormData;s.append("file",e);const{data:n}=await h.post("/settings/upload-image",s,{headers:{"Content-Type":"multipart/form-data"}});n!=null&&n.url&&(o["welcome.photo"]=n.url)}finally{a.target.value=""}}return(a,e)=>{const l=W("jodit-editor");return v(),w("div",Y,[t("header",{class:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between"},[e[19]||(e[19]=t("div",null,[t("h1",{class:"text-2xl font-semibold text-slate-900"},"Pengaturan Situs"),t("p",{class:"text-sm text-slate-500"},"Atur identitas visual dan konten statis portal desa.")],-1)),t("button",{class:"inline-flex items-center gap-2 rounded-full bg-primary px-4 py-2 text-sm font-semibold text-white",onClick:N}," Simpan Semua ")]),t("section",Z,[t("article",ee,[e[24]||(e[24]=t("h2",{class:"text-lg font-semibold text-slate-900"},"Identitas Desa",-1)),t("div",te,[t("label",se,[e[20]||(e[20]=r(" Nama Situs ",-1)),d(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>o["site.name"]=s),type:"text",class:"w-full rounded-lg border border-slate-200 px-3 py-2"},null,512),[[u,o["site.name"]]])]),t("label",oe,[e[21]||(e[21]=r(" Tagline ",-1)),d(t("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>o["site.tagline"]=s),type:"text",class:"w-full rounded-lg border border-slate-200 px-3 py-2"},null,512),[[u,o["site.tagline"]]])]),t("label",le,[e[22]||(e[22]=r(" Warna Primer ",-1)),d(t("input",{"onUpdate:modelValue":e[2]||(e[2]=s=>o["site.primary_color"]=s),type:"color",class:"h-10 w-20 rounded border border-slate-200"},null,512),[[u,o["site.primary_color"]]])]),t("label",ae,[e[23]||(e[23]=r(" Warna Sekunder ",-1)),d(t("input",{"onUpdate:modelValue":e[3]||(e[3]=s=>o["site.secondary_color"]=s),type:"color",class:"h-10 w-20 rounded border border-slate-200"},null,512),[[u,o["site.secondary_color"]]])])])]),t("article",re,[e[36]||(e[36]=t("h2",{class:"text-lg font-semibold text-slate-900"},"Hero & Sambutan",-1)),t("div",ne,[t("label",ie,[e[25]||(e[25]=r(" Judul Hero ",-1)),d(t("input",{"onUpdate:modelValue":e[4]||(e[4]=s=>o["hero.title"]=s),type:"text",class:"w-full rounded-lg border border-slate-200 px-3 py-2"},null,512),[[u,o["hero.title"]]])]),t("label",de,[e[26]||(e[26]=r(" Subjudul Hero ",-1)),g(l,{jsUrl:i(b),cssUrl:i(x),modelValue:o["hero.subtitle"],"onUpdate:modelValue":e[5]||(e[5]=s=>o["hero.subtitle"]=s),config:i(S)},null,8,["jsUrl","cssUrl","modelValue","config"])]),t("div",ue,[t("label",pe,[e[27]||(e[27]=r(" Teks Tombol ",-1)),d(t("input",{"onUpdate:modelValue":e[6]||(e[6]=s=>o["hero.cta_text"]=s),type:"text",class:"w-full rounded-lg border border-slate-200 px-3 py-2"},null,512),[[u,o["hero.cta_text"]]])]),t("label",me,[e[28]||(e[28]=r(" Link Tombol ",-1)),d(t("input",{"onUpdate:modelValue":e[7]||(e[7]=s=>o["hero.cta_link"]=s),type:"text",class:"w-full rounded-lg border border-slate-200 px-3 py-2"},null,512),[[u,o["hero.cta_link"]]])])]),t("label",ce,[e[29]||(e[29]=r(" Sambutan Kepala Desa ",-1)),g(l,{jsUrl:i(b),cssUrl:i(x),modelValue:o["welcome.message"],"onUpdate:modelValue":e[8]||(e[8]=s=>o["welcome.message"]=s),config:i(C)},null,8,["jsUrl","cssUrl","modelValue","config"])]),t("label",be,[e[30]||(e[30]=r(" Penutup Sambutan ",-1)),d(t("input",{"onUpdate:modelValue":e[9]||(e[9]=s=>o["welcome.author"]=s),type:"text",class:"w-full rounded-lg border border-slate-200 px-3 py-2"},null,512),[[u,o["welcome.author"]]])]),t("div",xe,[e[32]||(e[32]=t("span",null,"Foto Kepala Desa",-1)),t("div",fe,[t("div",ge,[o["welcome.photo"]?(v(),w("img",{key:0,src:o["welcome.photo"],alt:"foto",class:"h-full w-full object-cover"},null,8,ye)):z("",!0)]),d(t("input",{"onUpdate:modelValue":e[10]||(e[10]=s=>o["welcome.photo"]=s),type:"text",placeholder:"https://",class:"flex-1 rounded-lg border border-slate-200 px-3 py-2"},null,512),[[u,o["welcome.photo"]]]),t("label",ve,[e[31]||(e[31]=r(" Upload Foto ",-1)),t("input",{type:"file",accept:"image/*",class:"hidden",onChange:G},null,32)])])])]),t("div",we,[e[34]||(e[34]=t("h3",{class:"text-sm font-semibold text-slate-900"},"Gambar Jumbotron (Carousel)",-1)),e[35]||(e[35]=t("p",{class:"text-xs text-slate-500"},"Tambah beberapa gambar untuk ditampilkan sebagai slide di beranda. Seret untuk mengubah urutan.",-1)),t("div",he,[(v(!0),w(R,null,q(p.value,(s,n)=>(v(),w("div",{key:s+"-"+n,class:"relative h-24 w-40 overflow-hidden rounded-lg border bg-slate-100",draggable:"true",onDragstart:f=>B(n),onDragenter:k(f=>M(n),["prevent"]),onDragover:e[11]||(e[11]=k(()=>{},["prevent"])),onDrop:k(f=>K(n),["prevent"]),onDragend:O},[t("img",{src:s,class:"h-full w-full object-cover"},null,8,Ve),t("button",{type:"button",class:"absolute right-1 top-1 rounded bg-white/90 px-2 py-1 text-[10px] font-semibold text-rose-600 shadow",onClick:f=>P(n)},"Hapus",8,De)],40,Ue))),128)),t("label",ke,[e[33]||(e[33]=t("span",null,"Tambah Gambar",-1)),t("input",{type:"file",accept:"image/*",multiple:"",class:"hidden",onChange:F},null,32)])])])]),t("article",je,[e[39]||(e[39]=t("h2",{class:"text-lg font-semibold text-slate-900"},"Visi & Misi",-1)),t("div",Se,[t("label",Ce,[e[37]||(e[37]=r(" Visi ",-1)),g(l,{jsUrl:i(b),cssUrl:i(x),modelValue:o["vision.body"],"onUpdate:modelValue":e[12]||(e[12]=s=>o["vision.body"]=s),config:i(C)},null,8,["jsUrl","cssUrl","modelValue","config"])]),t("label",_e,[e[38]||(e[38]=r(" Daftar Misi (pisahkan baris) ",-1)),g(l,{jsUrl:i(b),cssUrl:i(x),modelValue:m.value,"onUpdate:modelValue":e[13]||(e[13]=s=>m.value=s),config:i(H)},null,8,["jsUrl","cssUrl","modelValue","config"])])])]),t("article",Te,[e[45]||(e[45]=t("h2",{class:"text-lg font-semibold text-slate-900"},"Kontak Desa",-1)),t("div",Ae,[t("label",He,[e[40]||(e[40]=r(" Alamat Kantor ",-1)),g(l,{jsUrl:i(b),cssUrl:i(x),modelValue:o["contact.address"],"onUpdate:modelValue":e[14]||(e[14]=s=>o["contact.address"]=s),config:i(S)},null,8,["jsUrl","cssUrl","modelValue","config"])]),t("label",Ee,[e[41]||(e[41]=r(" Email Resmi ",-1)),d(t("input",{"onUpdate:modelValue":e[15]||(e[15]=s=>o["contact.email"]=s),type:"email",class:"w-full rounded-lg border border-slate-200 px-3 py-2"},null,512),[[u,o["contact.email"]]])]),t("label",Je,[e[42]||(e[42]=r(" Nomor Telepon ",-1)),d(t("input",{"onUpdate:modelValue":e[16]||(e[16]=s=>o["contact.phone"]=s),type:"text",class:"w-full rounded-lg border border-slate-200 px-3 py-2"},null,512),[[u,o["contact.phone"]]])]),t("label",Ie,[e[43]||(e[43]=r(" Facebook ",-1)),d(t("input",{"onUpdate:modelValue":e[17]||(e[17]=s=>o["social.facebook"]=s),type:"text",class:"w-full rounded-lg border border-slate-200 px-3 py-2"},null,512),[[u,o["social.facebook"]]])]),t("label",Ne,[e[44]||(e[44]=r(" Instagram ",-1)),d(t("input",{"onUpdate:modelValue":e[18]||(e[18]=s=>o["social.instagram"]=s),type:"text",class:"w-full rounded-lg border border-slate-200 px-3 py-2"},null,512),[[u,o["social.instagram"]]])])])])])])}}};export{Ke as default};
