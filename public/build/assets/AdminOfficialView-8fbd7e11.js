import{g as h,f as v,o as k,a as l,b as d,d as t,F as w,r as V,e as U,k as m,n as r,w as p,v as i,t as f}from"./app-7ddd2cfa.js";const O={class:"p-8"},$={class:"mt-8 rounded-2xl border border-slate-200 bg-white p-6 shadow-sm"},C={key:0,class:"grid place-items-center py-16"},N={key:1,class:"space-y-4"},D={class:"grid gap-4 md:grid-cols-3 text-xs font-semibold text-slate-500"},j={class:"space-y-1"},B=["onUpdate:modelValue"],T={class:"space-y-1"},F=["onUpdate:modelValue"],M={class:"space-y-1"},S=["onUpdate:modelValue"],E={class:"space-y-1 md:col-span-2"},H=["onUpdate:modelValue"],L={class:"space-y-1"},P=["onUpdate:modelValue"],A={class:"space-y-1 md:col-span-2"},I=["onUpdate:modelValue"],J={class:"mt-3 flex justify-between text-xs font-semibold"},K={class:"text-slate-400"},R={class:"space-x-3"},q=["onClick"],z=["onClick"],G={key:0,class:"text-center text-xs text-slate-400"},X={__name:"AdminOfficialView",setup(Q){const n=h([]),c=v(!1);function x(e){return`${e.id??"new"}-${Math.random().toString(36).slice(2,9)}`}function u(e={}){return{_key:x(e),id:e.id??null,name:e.name??"",position:e.position??"",photo:e.photo??"",phone:e.phone??"",email:e.email??"",order:Number(e.order??0)}}async function b(){c.value=!0;try{const{data:e}=await m.get("/village-officials");n.splice(0,n.length,...e.map(u))}finally{c.value=!1}}function y(){n.unshift(u())}async function _(e){const s={name:e.name,position:e.position,photo:e.photo||null,phone:e.phone||null,email:e.email||null,order:Number(e.order)||0};if(e.id){const{data:a}=await m.put(`/village-officials/${e.id}`,s);Object.assign(e,u(a))}else{const{data:a}=await m.post("/village-officials",s);Object.assign(e,u(a))}}async function g(e){if(e.id){if(!confirm(`Hapus ${e.name||"perangkat desa"}?`))return;await m.delete(`/village-officials/${e.id}`)}const s=n.findIndex(a=>a._key===e._key);s!==-1&&n.splice(s,1)}return k(b),(e,s)=>(l(),d("div",O,[t("header",{class:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between"},[s[0]||(s[0]=t("div",null,[t("h1",{class:"text-2xl font-semibold text-slate-900"},"Perangkat Desa"),t("p",{class:"text-sm text-slate-500"},"Kelola daftar perangkat desa yang tampil pada halaman profil.")],-1)),t("button",{class:"inline-flex items-center gap-2 rounded-full bg-primary px-4 py-2 text-sm font-semibold text-white",onClick:y}," Tambah Perangkat ")]),t("section",$,[c.value?(l(),d("div",C,[...s[1]||(s[1]=[t("div",{class:"h-10 w-10 animate-spin rounded-full border-4 border-primary/30 border-t-primary"},null,-1)])])):(l(),d("div",N,[(l(!0),d(w,null,V(n,a=>(l(),d("article",{key:a._key,class:"rounded-xl border border-slate-100 bg-slate-50 p-4"},[t("div",D,[t("label",j,[s[2]||(s[2]=r(" Nama ",-1)),p(t("input",{"onUpdate:modelValue":o=>a.name=o,type:"text",class:"w-full rounded-lg border border-slate-200 px-3 py-2 text-sm"},null,8,B),[[i,a.name]])]),t("label",T,[s[3]||(s[3]=r(" Jabatan ",-1)),p(t("input",{"onUpdate:modelValue":o=>a.position=o,type:"text",class:"w-full rounded-lg border border-slate-200 px-3 py-2 text-sm"},null,8,F),[[i,a.position]])]),t("label",M,[s[4]||(s[4]=r(" Urutan ",-1)),p(t("input",{"onUpdate:modelValue":o=>a.order=o,type:"number",min:"0",class:"w-full rounded-lg border border-slate-200 px-3 py-2 text-sm"},null,8,S),[[i,a.order,void 0,{number:!0}]])]),t("label",E,[s[5]||(s[5]=r(" Foto (URL) ",-1)),p(t("input",{"onUpdate:modelValue":o=>a.photo=o,type:"text",class:"w-full rounded-lg border border-slate-200 px-3 py-2 text-sm"},null,8,H),[[i,a.photo]])]),t("label",L,[s[6]||(s[6]=r(" Telepon ",-1)),p(t("input",{"onUpdate:modelValue":o=>a.phone=o,type:"text",class:"w-full rounded-lg border border-slate-200 px-3 py-2 text-sm"},null,8,P),[[i,a.phone]])]),t("label",A,[s[7]||(s[7]=r(" Email ",-1)),p(t("input",{"onUpdate:modelValue":o=>a.email=o,type:"email",class:"w-full rounded-lg border border-slate-200 px-3 py-2 text-sm"},null,8,I),[[i,a.email]])])]),t("div",J,[t("span",K,f(a.id?"Data tersimpan":"Data baru"),1),t("div",R,[t("button",{class:"text-primary",onClick:o=>_(a)},"Simpan",8,q),t("button",{class:"text-rose-500",onClick:o=>g(a)},"Hapus",8,z)])])]))),128)),n.length?U("",!0):(l(),d("p",G,"Belum ada perangkat desa terdaftar."))]))])]))}};export{X as default};
