import{f as _,g,o as k,a as n,b as d,d as e,F as w,r as h,e as V,k as c,n as i,w as r,v as u,t as U}from"./app-7ddd2cfa.js";const S={class:"p-8"},$={class:"mt-8 rounded-2xl border border-slate-200 bg-white p-6 shadow-sm"},j={key:0,class:"grid place-items-center py-16"},C={key:1,class:"space-y-4"},D={class:"grid gap-4 md:grid-cols-2"},L={class:"text-xs font-semibold text-slate-500 space-y-1"},T=["onUpdate:modelValue"],B={class:"text-xs font-semibold text-slate-500 space-y-1"},M=["onUpdate:modelValue"],N={class:"text-xs font-semibold text-slate-500 space-y-1"},I=["onUpdate:modelValue"],v={class:"text-xs font-semibold text-slate-500 space-y-1"},A=["onUpdate:modelValue"],F={class:"text-xs font-semibold text-slate-500 space-y-1"},H=["onUpdate:modelValue"],O={class:"text-xs font-semibold text-slate-500 space-y-1"},E=["onUpdate:modelValue"],J={class:"mt-4 flex justify-between text-xs font-semibold"},P={class:"text-slate-400"},R={class:"space-x-3"},q=["onClick"],z=["onClick"],G={key:0,class:"text-center text-xs text-slate-400"},W={__name:"AdminServiceView",setup(K){const x=_(!1),o=g([]);function p(t={}){return{_key:`${t.id??"new"}-${Math.random().toString(36).slice(2,9)}`,id:t.id??null,title:t.title??"",subtitle:t.subtitle??"",description:t.description??"",icon:t.icon??"",link:t.link??"",order:t.order??0}}async function b(){x.value=!0;try{const{data:t}=await c.get("/services");o.splice(0,o.length,...t.map(p))}finally{x.value=!1}}function m(){o.unshift(p())}async function y(t){const l={title:t.title,subtitle:t.subtitle||null,description:t.description||null,icon:t.icon||null,link:t.link||null,order:Number(t.order)||0};if(t.id){const{data:s}=await c.put(`/services/${t.id}`,l);Object.assign(t,p(s))}else{const{data:s}=await c.post("/services",l);Object.assign(t,p(s))}}async function f(t){if(t.id){if(!confirm(`Hapus layanan "${t.title||"tanpa judul"}"?`))return;await c.delete(`/services/${t.id}`)}const l=o.findIndex(s=>s._key===t._key);l!==-1&&o.splice(l,1)}return k(b),(t,l)=>(n(),d("div",S,[e("header",{class:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between"},[l[0]||(l[0]=e("div",null,[e("h1",{class:"text-2xl font-semibold text-slate-900"},"Layanan Digital Desa"),e("p",{class:"text-sm text-slate-500"},"Atur daftar layanan publik yang tampil pada portal.")],-1)),e("button",{class:"inline-flex items-center gap-2 rounded-full bg-primary px-4 py-2 text-sm font-semibold text-white",onClick:m}," Tambah Layanan ")]),e("section",$,[x.value?(n(),d("div",j,[...l[1]||(l[1]=[e("div",{class:"h-10 w-10 animate-spin rounded-full border-4 border-primary/30 border-t-primary"},null,-1)])])):(n(),d("div",C,[(n(!0),d(w,null,h(o,s=>(n(),d("article",{key:s._key,class:"rounded-xl border border-slate-100 bg-slate-50 p-4"},[e("div",D,[e("label",L,[l[2]||(l[2]=i(" Judul ",-1)),r(e("input",{"onUpdate:modelValue":a=>s.title=a,type:"text",class:"w-full rounded-lg border border-slate-200 px-3 py-2"},null,8,T),[[u,s.title]])]),e("label",B,[l[3]||(l[3]=i(" Subjudul ",-1)),r(e("input",{"onUpdate:modelValue":a=>s.subtitle=a,type:"text",class:"w-full rounded-lg border border-slate-200 px-3 py-2"},null,8,M),[[u,s.subtitle]])]),e("label",N,[l[4]||(l[4]=i(" Deskripsi ",-1)),r(e("textarea",{"onUpdate:modelValue":a=>s.description=a,rows:"3",class:"w-full rounded-lg border border-slate-200 px-3 py-2"},null,8,I),[[u,s.description]])]),e("label",v,[l[5]||(l[5]=i(" Ikon / Penanda ",-1)),r(e("input",{"onUpdate:modelValue":a=>s.icon=a,type:"text",class:"w-full rounded-lg border border-slate-200 px-3 py-2",placeholder:"Misal: DocumentTextIcon"},null,8,A),[[u,s.icon]])]),e("label",F,[l[6]||(l[6]=i(" Tautan ",-1)),r(e("input",{"onUpdate:modelValue":a=>s.link=a,type:"text",class:"w-full rounded-lg border border-slate-200 px-3 py-2"},null,8,H),[[u,s.link]])]),e("label",O,[l[7]||(l[7]=i(" Urutan ",-1)),r(e("input",{"onUpdate:modelValue":a=>s.order=a,type:"number",min:"0",class:"w-full rounded-lg border border-slate-200 px-3 py-2"},null,8,E),[[u,s.order,void 0,{number:!0}]])])]),e("div",J,[e("span",P,U(s.id?"Layanan tersimpan":"Layanan baru"),1),e("div",R,[e("button",{class:"text-primary",onClick:a=>y(s)},"Simpan",8,q),e("button",{class:"text-rose-500",onClick:a=>f(s)},"Hapus",8,z)])])]))),128)),o.length?V("",!0):(n(),d("p",G,"Belum ada layanan terdaftar."))]))])]))}};export{W as default};
