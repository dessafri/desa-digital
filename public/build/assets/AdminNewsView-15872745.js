import{f as y,g as q,c,o as G,a as r,b as o,y as I,d as e,F as x,r as v,t as i,e as C,A as J,w as d,v as p,j,k as m,p as _,n as z}from"./app-7ddd2cfa.js";const O={class:"space-y-8 p-8"},Q={class:"grid gap-6 xl:grid-cols-[minmax(0,1fr)_360px]"},W={class:"rounded-3xl border border-slate-200 bg-white/90 p-6 shadow-sm backdrop-blur"},X={class:"space-y-6"},Y={class:"flex flex-col gap-4 border-b border-slate-100 pb-6"},Z={class:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between"},ee={class:"flex flex-wrap items-center gap-3 text-sm font-semibold"},te={class:"flex flex-wrap gap-2"},se=["onClick"],ae={key:0,class:"grid place-items-center py-20"},le={class:"hidden min-w-full table-fixed divide-y divide-slate-100 md:table"},ie={class:"divide-y divide-slate-100 text-sm"},re={class:"py-4"},oe={class:"font-semibold text-slate-800"},ne={class:"text-xs text-slate-400"},de={class:"py-4 text-xs text-slate-500"},ue={class:"py-4"},pe={class:"py-4 text-xs text-slate-500"},be={class:"py-4 text-right"},ce={class:"inline-flex items-center gap-3"},xe=["onClick"],me=["onClick"],fe={class:"grid gap-4 md:hidden"},ge={class:"flex items-start justify-between gap-3"},ye={class:"text-sm font-semibold text-slate-900"},ve={class:"text-[11px] text-slate-400"},_e={class:"mt-3 flex flex-wrap items-center gap-3 text-[11px] text-slate-500"},he={class:"mt-4 flex gap-3 text-xs font-semibold"},we=["onClick"],ke=["onClick"],Ce={key:0,class:"rounded-2xl border border-dashed border-slate-200 bg-slate-50 py-16 text-center"},Be={class:"text-sm font-semibold text-slate-600"},De={class:"rounded-3xl border border-slate-200 bg-white/85 p-6 shadow-sm backdrop-blur"},Te={class:"flex items-start justify-between border-b border-slate-100 pb-4"},Ve={class:"text-lg font-semibold text-slate-900"},$e={class:"space-y-1"},Pe={class:"space-y-1"},Ue=["value"],Se={class:"space-y-1"},je={class:"space-y-1"},Fe={class:"space-y-1"},Me={class:"space-y-1"},Ne={class:"grid gap-3 sm:grid-cols-2"},Ke={class:"space-y-1"},Ee={key:0,class:"space-y-1"},Le={class:"flex gap-2 pt-2"},Ae={type:"submit",class:"flex-1 rounded-lg bg-primary px-4 py-2 text-sm font-semibold text-white shadow-sm transition hover:bg-primary/90"},qe={__name:"AdminNewsView",setup(He){const F=[{id:"published",label:"Published"},{id:"draft",label:"Draft"},{id:"all",label:"Semua"}],b=y([]),B=y([]),h=y(!1),n=y("published"),s=q({id:null,news_category_id:"",title:"",slug:"",excerpt:"",body:"",cover_image:"",status:"draft",published_at:""}),w=c(()=>n.value==="all"?b.value:b.value.filter(l=>l.status===n.value)),M=c(()=>{const l={all:b.value.length,draft:0,published:0};return b.value.forEach(t=>{t.status==="draft"&&(l.draft+=1),t.status==="published"&&(l.published+=1)}),l}),D=c(()=>!!s.id),N=c(()=>D.value?"Perbarui Berita":"Tambah Berita"),K=c(()=>n.value==="draft"?"Belum ada draft berita.":n.value==="published"?"Belum ada berita yang dipublikasikan.":"Belum ada data berita.");function E(l){const t="inline-flex items-center gap-2 rounded-full px-4 py-2 text-xs font-semibold transition";return n.value===l?`${t} bg-primary text-white shadow`:`${t} border border-slate-200 text-slate-600 hover:border-primary/40 hover:text-primary`}function L(l){return n.value===l?"bg-white/20 text-white":"bg-slate-200 text-slate-600"}function A(l){n.value=l}function T(l){return l==="published"?"Published":"Draft"}function V(l){const t="inline-flex h-7 items-center rounded-full px-3 text-xs font-semibold";return l==="published"?`${t} bg-emerald-50 text-emerald-600`:`${t} bg-slate-100 text-slate-500`}async function H(){const{data:l}=await m.get("/news-categories");B.value=l}async function f(){h.value=!0;try{const{data:l}=await m.get("/news",{params:{include_draft:!0,per_page:100,order:"desc"}});b.value=l.data??[]}finally{h.value=!1}}function $(){g(),n.value==="published"?s.status="published":s.status="draft"}function P(l){s.id=l.id,s.news_category_id=l.news_category_id??"",s.title=l.title,s.slug=l.slug??"",s.excerpt=l.excerpt??"",s.body=l.body??"",s.cover_image=l.cover_image??"",s.status=l.status??"draft",s.published_at=l.published_at?l.published_at.substring(0,16):"",(l.status==="published"||l.status==="draft")&&(n.value=l.status)}function g(){s.id=null,s.news_category_id="",s.title="",s.slug="",s.excerpt="",s.body="",s.cover_image="",s.status=n.value==="published"?"published":"draft",s.published_at=""}async function R(){const l={news_category_id:s.news_category_id||null,title:s.title,slug:s.slug||null,excerpt:s.excerpt||null,body:s.body,cover_image:s.cover_image||null,status:s.status,published_at:s.published_at||null};s.id?await m.put(`/news/${s.id}`,l):await m.post("/news",l),await f(),n.value=l.status==="published"?"published":"draft",g()}async function U(l){confirm(`Hapus berita "${l.title}"?`)&&(await m.delete(`/news/${l.id}`),await f())}function S(l){return l?new Intl.DateTimeFormat("id-ID",{day:"numeric",month:"long",year:"numeric"}).format(new Date(l)):"-"}return G(async()=>{await Promise.all([H(),f()]),$()}),(l,t)=>(r(),o("div",O,[t[26]||(t[26]=I('<header class="flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between"><div class="space-y-1.5"><p class="text-xs font-semibold uppercase tracking-[0.35em] text-primary/70">Konten Desa</p><h1 class="text-3xl font-semibold text-slate-900">Manajemen Berita Desa</h1><p class="text-sm text-slate-500">Kurasi dan publikasikan kabar desa dengan alur kerja yang rapi dan konsisten.</p></div></header>',1)),e("section",Q,[e("div",W,[e("div",X,[e("div",Y,[e("div",Z,[t[9]||(t[9]=e("div",null,[e("h2",{class:"text-lg font-semibold text-slate-900"},"Daftar Berita"),e("p",{class:"text-xs text-slate-500"},"Filter rilis berdasarkan status untuk memantau proses editorial.")],-1)),e("div",ee,[e("button",{class:"inline-flex items-center gap-2 rounded-full border border-slate-200 px-4 py-2 text-slate-600 transition hover:border-primary hover:text-primary",onClick:t[0]||(t[0]=a=>f())}," Muat ulang "),e("button",{class:"inline-flex items-center gap-2 rounded-full bg-primary px-5 py-2 text-white shadow-sm transition hover:bg-primary/90",onClick:$}," Tambah berita ")])]),e("div",te,[(r(),o(x,null,v(F,a=>e("button",{key:a.id,type:"button",class:_(E(a.id)),onClick:u=>A(a.id)},[z(i(a.label)+" ",1),e("span",{class:_(["rounded-full bg-black/10 px-2 py-0.5 text-[10px] font-semibold",L(a.id)])},i(M.value[a.id]??0),3)],10,se)),64))])]),h.value?(r(),o("div",ae,[...t[10]||(t[10]=[e("div",{class:"h-10 w-10 animate-spin rounded-full border-4 border-primary/30 border-t-primary"},null,-1)])])):(r(),o(x,{key:1},[e("table",le,[t[11]||(t[11]=e("thead",null,[e("tr",{class:"text-left text-xs uppercase tracking-[0.3em] text-slate-400"},[e("th",{class:"pb-4 font-semibold"},"Judul"),e("th",{class:"pb-4 font-semibold"},"Kategori"),e("th",{class:"pb-4 font-semibold"},"Status"),e("th",{class:"pb-4 font-semibold"},"Diperbarui"),e("th",{class:"pb-4 text-right font-semibold"},"Aksi")])],-1)),e("tbody",ie,[(r(!0),o(x,null,v(w.value,a=>{var u;return r(),o("tr",{key:a.id,class:"align-top"},[e("td",re,[e("p",oe,i(a.title),1),e("p",ne,i(a.slug||"�"),1)]),e("td",de,i(((u=a.category)==null?void 0:u.name)??"-"),1),e("td",ue,[e("span",{class:_(V(a.status))},i(T(a.status)),3)]),e("td",pe,i(S(a.updated_at)),1),e("td",be,[e("div",ce,[e("button",{class:"text-xs font-semibold text-primary hover:text-primary/80",onClick:k=>P(a)},"Ubah",8,xe),e("button",{class:"text-xs font-semibold text-rose-500 hover:text-rose-400",onClick:k=>U(a)},"Hapus",8,me)])])])}),128))])]),e("div",fe,[(r(!0),o(x,null,v(w.value,a=>{var u;return r(),o("article",{key:a.id,class:"rounded-2xl border border-slate-200 bg-white p-4 shadow-sm"},[e("div",ge,[e("div",null,[e("p",ye,i(a.title),1),e("p",ve,i(a.slug||"�"),1)]),e("span",{class:_(V(a.status))},i(T(a.status)),3)]),e("div",_e,[e("span",null,i(((u=a.category)==null?void 0:u.name)??"Tanpa kategori"),1),t[12]||(t[12]=e("span",null,"�",-1)),e("span",null,"Terakhir diperbarui "+i(S(a.updated_at)),1)]),e("div",he,[e("button",{class:"text-primary",onClick:k=>P(a)},"Ubah",8,we),e("button",{class:"text-rose-500",onClick:k=>U(a)},"Hapus",8,ke)])])}),128))]),w.value.length?C("",!0):(r(),o("div",Ce,[e("p",Be,i(K.value),1),t[13]||(t[13]=e("p",{class:"mt-2 text-xs text-slate-400"},'Gunakan tombol "Tambah berita" untuk mulai menulis.',-1))]))],64))])]),e("aside",De,[e("div",Te,[e("div",null,[t[14]||(t[14]=e("p",{class:"text-xs font-semibold uppercase tracking-[0.3em] text-primary/70"},"Editor",-1)),e("h2",Ve,i(N.value),1),t[15]||(t[15]=e("p",{class:"text-xs text-slate-500"},"Lengkapi detail berita sebelum dipublikasikan.",-1))]),D.value?(r(),o("button",{key:0,class:"rounded-full border border-slate-200 px-3 py-1 text-xs font-semibold text-slate-500 transition hover:border-primary hover:text-primary",onClick:g}," Reset ")):C("",!0)]),e("form",{class:"mt-6 space-y-4 text-sm",onSubmit:J(R,["prevent"])},[e("div",$e,[t[16]||(t[16]=e("label",{class:"text-xs font-semibold text-slate-500"},"Judul",-1)),d(e("input",{"onUpdate:modelValue":t[1]||(t[1]=a=>s.title=a),type:"text",class:"w-full rounded-lg border border-slate-200 px-3 py-2 focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/20",required:""},null,512),[[p,s.title]])]),e("div",Pe,[t[18]||(t[18]=e("label",{class:"text-xs font-semibold text-slate-500"},"Kategori",-1)),d(e("select",{"onUpdate:modelValue":t[2]||(t[2]=a=>s.news_category_id=a),class:"w-full rounded-lg border border-slate-200 px-3 py-2 focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/20"},[t[17]||(t[17]=e("option",{value:""},"Tanpa kategori",-1)),(r(!0),o(x,null,v(B.value,a=>(r(),o("option",{key:a.id,value:a.id},i(a.name),9,Ue))),128))],512),[[j,s.news_category_id]])]),e("div",Se,[t[19]||(t[19]=e("label",{class:"text-xs font-semibold text-slate-500"},"Slug (opsional)",-1)),d(e("input",{"onUpdate:modelValue":t[3]||(t[3]=a=>s.slug=a),type:"text",class:"w-full rounded-lg border border-slate-200 px-3 py-2 focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/20",placeholder:"otomatis mengikuti judul"},null,512),[[p,s.slug]])]),e("div",je,[t[20]||(t[20]=e("label",{class:"text-xs font-semibold text-slate-500"},"Ringkasan singkat",-1)),d(e("textarea",{"onUpdate:modelValue":t[4]||(t[4]=a=>s.excerpt=a),rows:"2",class:"w-full rounded-lg border border-slate-200 px-3 py-2 focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/20"},null,512),[[p,s.excerpt]])]),e("div",Fe,[t[21]||(t[21]=e("label",{class:"text-xs font-semibold text-slate-500"},"Konten utama",-1)),d(e("textarea",{"onUpdate:modelValue":t[5]||(t[5]=a=>s.body=a),rows:"6",class:"w-full rounded-lg border border-slate-200 px-3 py-2 focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/20",required:""},null,512),[[p,s.body]])]),e("div",Me,[t[22]||(t[22]=e("label",{class:"text-xs font-semibold text-slate-500"},"Gambar sampul (URL)",-1)),d(e("input",{"onUpdate:modelValue":t[6]||(t[6]=a=>s.cover_image=a),type:"text",class:"w-full rounded-lg border border-slate-200 px-3 py-2 focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/20",placeholder:"https://"},null,512),[[p,s.cover_image]])]),e("div",Ne,[e("div",Ke,[t[24]||(t[24]=e("label",{class:"text-xs font-semibold text-slate-500"},"Status",-1)),d(e("select",{"onUpdate:modelValue":t[7]||(t[7]=a=>s.status=a),class:"w-full rounded-lg border border-slate-200 px-3 py-2 focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/20"},[...t[23]||(t[23]=[e("option",{value:"draft"},"Draft",-1),e("option",{value:"published"},"Published",-1)])],512),[[j,s.status]])]),s.status==="published"?(r(),o("div",Ee,[t[25]||(t[25]=e("label",{class:"text-xs font-semibold text-slate-500"},"Tanggal publikasi",-1)),d(e("input",{"onUpdate:modelValue":t[8]||(t[8]=a=>s.published_at=a),type:"datetime-local",class:"w-full rounded-lg border border-slate-200 px-3 py-2 focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/20"},null,512),[[p,s.published_at]])])):C("",!0)]),e("div",Le,[e("button",Ae,i(s.id?"Perbarui berita":"Simpan berita"),1),e("button",{type:"button",class:"rounded-lg border border-slate-200 px-4 py-2 text-sm font-semibold text-slate-500 transition hover:border-primary hover:text-primary",onClick:g}," Bersihkan ")])],32)])])]))}};export{qe as default};
