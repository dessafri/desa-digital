import{N as F,f,c as h,o as E,a as o,b as i,d as t,n as g,t as l,F as v,r as k,k as C,p as y}from"./app-0010789c.js";const H={class:"space-y-8 p-8"},K={class:"flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between"},S={class:"flex flex-wrap items-center gap-3"},V={class:"grid gap-4 sm:grid-cols-3"},I={class:"rounded-2xl border border-slate-200 bg-white p-5 shadow-sm"},L={class:"mt-3 text-3xl font-semibold text-slate-900"},z={class:"rounded-2xl border border-emerald-100 bg-emerald-50/70 p-5 text-emerald-700"},G={class:"mt-3 text-3xl font-semibold"},R={class:"rounded-2xl border border-amber-100 bg-amber-50/80 p-5 text-amber-600"},U={class:"mt-3 text-3xl font-semibold"},q={class:"space-y-6 rounded-3xl border border-slate-200 bg-white/95 p-6 shadow-sm backdrop-blur"},J={class:"flex flex-wrap items-center justify-between gap-4 border-b border-slate-100 pb-4"},O={class:"flex flex-wrap gap-2"},Q=["onClick"],W={key:0,class:"grid place-items-center py-20"},X={key:0,class:"grid gap-4 sm:grid-cols-2 xl:grid-cols-3"},Y={class:"space-y-3"},Z={class:"flex items-center justify-between gap-3"},tt={class:"text-[11px] uppercase tracking-[0.25em] text-slate-400"},et={class:"text-lg font-semibold text-slate-900 line-clamp-2"},st={class:"text-sm text-slate-500 line-clamp-3"},at={class:"mt-5 flex items-center justify-between text-xs font-semibold"},lt={class:"text-slate-400"},rt={class:"flex items-center gap-4"},ot=["onClick"],it=["onClick"],nt={key:1,class:"rounded-2xl border border-dashed border-slate-200 bg-slate-50 py-16 text-center"},pt={__name:"AdminNewsView",setup(dt){const w=F(),B=()=>{w.push("/admin/berita/tambah")},D=a=>{w.push(`/admin/berita/${a}/edit`)},$=[{id:"all",label:"Semua"},{id:"published",label:"Published"},{id:"draft",label:"Draft"}],n=f([]),c=f(!1),d=f("all"),_=h(()=>d.value==="all"?n.value:n.value.filter(a=>a.status===d.value)),p=h(()=>{const a={all:n.value.length,published:0,draft:0};return n.value.forEach(e=>{e.status==="published"&&(a.published+=1),e.status==="draft"&&(a.draft+=1)}),a}),x=h(()=>({total:p.value.all,published:p.value.published,draft:p.value.draft}));function T(a){const e="inline-flex items-center gap-2 rounded-full px-4 py-2 text-xs font-semibold transition";return d.value===a?`${e} bg-primary text-white shadow`:`${e} border border-slate-200 text-slate-600 hover:border-primary/40 hover:text-primary`}function A(a){return d.value===a?"rounded-full bg-white/30 px-2 py-0.5 text-[10px] font-semibold text-white":"rounded-full bg-slate-200 px-2 py-0.5 text-[10px] font-semibold text-slate-600"}function j(a){return a==="published"?"Published":"Draft"}function M(a){const e="inline-flex h-7 items-center rounded-full px-3 text-xs font-semibold";return a==="published"?`${e} bg-emerald-50 text-emerald-600`:`${e} bg-slate-100 text-slate-500`}async function m(){var a;c.value=!0;try{const s=(await C.get("/news",{params:{include_draft:1,per_page:100}})).data,u=Array.isArray(s)?s:Array.isArray(s==null?void 0:s.data)?s.data:Array.isArray((a=s==null?void 0:s.data)==null?void 0:a.data)?s.data.data:[];n.value=u.map(r=>({...r,status:r.status||(r.published_at?"published":"draft")})).sort((r,b)=>new Date(b.published_at||b.updated_at||b.created_at||0)-new Date(r.published_at||r.updated_at||r.created_at||0))}finally{c.value=!1}}async function P(a){confirm(`Hapus berita "${a.title}"?`)&&(await C.delete(`/news/${a.id}`),await m())}function N(a){return a?new Intl.DateTimeFormat("id-ID",{day:"numeric",month:"long",year:"numeric"}).format(new Date(a)):"-"}return E(m),(a,e)=>(o(),i("div",H,[t("header",K,[e[3]||(e[3]=t("div",{class:"space-y-1.5"},[t("p",{class:"text-xs font-semibold uppercase tracking-[0.35em] text-primary/70"},"Konten Desa"),t("h1",{class:"text-3xl font-semibold text-slate-900"},"Daftar Berita Desa"),t("p",{class:"text-sm text-slate-500"},"Kelola rilis berita yang terbit maupun masih draft dalam satu tempat.")],-1)),t("div",S,[t("button",{type:"button",class:"inline-flex items-center gap-2 rounded-full bg-primary px-5 py-2 text-sm font-semibold text-white shadow transition hover:bg-primary/90",onClick:B},[...e[1]||(e[1]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M12 6v12m6-6H6"})],-1),g(" Tambah Berita ",-1)])]),t("button",{type:"button",class:"inline-flex items-center gap-2 rounded-full border border-slate-200 px-4 py-2 text-sm font-semibold text-slate-600 transition hover:border-primary hover:text-primary",onClick:e[0]||(e[0]=s=>m())},[...e[2]||(e[2]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M4.5 4.5v6h6M19.5 19.5v-6h-6M5.876 18.124A8.25 8.25 0 0 1 18.124 5.876"})],-1),g(" Muat ulang ",-1)])])])]),t("div",V,[t("article",I,[e[4]||(e[4]=t("p",{class:"text-xs uppercase tracking-[0.3em] text-slate-400"},"Total",-1)),t("p",L,l(x.value.total),1),e[5]||(e[5]=t("p",{class:"mt-1 text-xs text-slate-500"},"Seluruh berita tercatat",-1))]),t("article",z,[e[6]||(e[6]=t("p",{class:"text-xs uppercase tracking-[0.3em] text-emerald-500"},"Published",-1)),t("p",G,l(x.value.published),1),e[7]||(e[7]=t("p",{class:"mt-1 text-xs opacity-80"},"Telah tayang di portal",-1))]),t("article",R,[e[8]||(e[8]=t("p",{class:"text-xs uppercase tracking-[0.3em] text-amber-500"},"Draft",-1)),t("p",U,l(x.value.draft),1),e[9]||(e[9]=t("p",{class:"mt-1 text-xs opacity-80"},"Menunggu publikasi",-1))])]),t("section",q,[t("div",J,[e[10]||(e[10]=t("div",null,[t("h2",{class:"text-lg font-semibold text-slate-900"},"Katalog Berita"),t("p",{class:"text-xs text-slate-500"},"Filter berdasarkan status rilis.")],-1)),t("div",O,[(o(),i(v,null,k($,s=>t("button",{key:s.id,type:"button",class:y(T(s.id)),onClick:u=>d.value=s.id},[g(l(s.label)+" ",1),t("span",{class:y(A(s.id))},l(p.value[s.id]??0),3)],10,Q)),64))])]),c.value?(o(),i("div",W,[...e[11]||(e[11]=[t("div",{class:"h-10 w-10 animate-spin rounded-full border-4 border-primary/30 border-t-primary"},null,-1)])])):(o(),i(v,{key:1},[_.value.length?(o(),i("div",X,[(o(!0),i(v,null,k(_.value,s=>{var u;return o(),i("article",{key:s.id,class:"flex h-full flex-col justify-between rounded-2xl border border-slate-200 bg-white p-5 shadow-sm transition hover:-translate-y-0.5 hover:shadow-lg"},[t("div",Y,[t("div",Z,[t("span",{class:y(M(s.status))},l(j(s.status)),3),t("span",tt,l(N(s.published_at||s.updated_at)),1)]),t("h3",et,l(s.title),1),t("p",st,l(s.excerpt||"Belum ada ringkasan singkat."),1)]),t("div",at,[t("p",lt,l(((u=s.category)==null?void 0:u.name)??"Tanpa kategori"),1),t("div",rt,[t("button",{type:"button",class:"text-primary hover:text-primary/80",onClick:r=>D(s.id)}," Ubah ",8,ot),t("button",{class:"text-rose-500 hover:text-rose-400",onClick:r=>P(s)},"Hapus",8,it)])])])}),128))])):(o(),i("div",nt,[...e[12]||(e[12]=[t("p",{class:"text-sm font-semibold text-slate-600"},"Belum ada berita pada filter ini.",-1),t("p",{class:"mt-2 text-xs text-slate-400"},'Gunakan tombol "Tambah Berita" untuk mulai menulis.',-1)])]))],64))])]))}};export{pt as default};
